(function() {
    window.cachebreak = 1;

    function t(e, t = !1) {
        var n = e.innerText;
        return n.length == 0 && t == !1 && (n = e.innerHTML.trim(), typeof e.children != "undefined" && e.children.length > 0 && e.children[0].tagName == "IMG" && (n = "image:" + e.children[0].src)), n
    }

    function n() {
        if (showClickCounts()) {
            var n, s, e = new FormData;
            e.append("postID", getPostID()), e.append("location", window.location), n = getHomeURL() + "/wp-json/track-the-click/v3/getpagelinkclicks/" + window.cachebreak++, jQuery.ajax({
                url: n,
                type: "POST",
                data: e,
                contentType: !1,
                processData: !1,
                cache: !1,
                beforeSend: function(e) {
                    e.setRequestHeader("X-WP-Nonce", ajax_var.nonce)
                },
                success: function(e) {
                    if (e !== !1) {
                        var n = document.getElementsByTagName("a");
                        Array.from(n, n => {
                            e.forEach(e => {
                                n.href == e.target && t(n) == e.anchor && e.clicks > 0 && n.setAttribute("data-clicks", e.clicks)
                            })
                        })
                    }
                },
                error: function(e) {
                    console.error(e)
                }
            })
        }
        s = document.getElementsByTagName("a"), Array.from(s, e => {
            typeof proProcessLinks == "function" && proProcessLinks(e)
        })
    }

    function s(e) {
        if (!ttc_data.proBeacon && e.target.closest("A")) {
            closestA = e.target.closest("A");
            var s, n = new FormData;
            n.append("postID", getPostID()), n.append("location", window.location), n.append("anchor", t(closestA)), n.append("target", closestA.href), s = getHomeURL() + "/wp-json/track-the-click/v3/click/" + window.cachebreak++, navigator.sendBeacon(s, n)
        }
    }
    document.readyState === "loading" ? document.addEventListener("DOMContentLoaded", n) : n(), document.addEventListener("click", s), document.addEventListener("auxclick", s)
})()